Features:

Would you be open to fixing by-hash for flat archives too?
Well it's flat, so ./by-hash/$HASH, which is either md5, sha(1,256,512)

Fresh issues:

Strange message formating:
  503  Cache storage error - Permission denied/var/cache/apt-cacher-ng/www.scootersoftware.com/dists/bcompare4/Release [IP: ::1 3142]



DontCache mode might causes hanging when the filter matches some files and some not:

Fehl:1 http://packages.microsoft.com/repos/vscode stable InRelease
  503  Cache storage error - Permission denied/var/cache/apt-cacher-ng/packages.microsoft.com/repos/vscode/dists/stable/InRelease [IP: ::1 3142]
  Holen:2 http://security.debian.org jessie/updates InRelease [63,1 kB]                             
  OK:3 http://ftp2.de.debian.org/debian experimental InRelease                                                
  Holen:4 http://security.debian.org jessie/updates/main Sources [222 kB]                                                     
  Ign:5 http://archive.zfsonlinux.org/debian jessie InRelease                                                                   
  Ign:6 http://www.scootersoftware.com bcompare4 InRelease                                          
  Holen:7 http://security.debian.org jessie/updates/main amd64 Packages [444 kB]
  Fehl:8 http://www.scootersoftware.com bcompare4 Release                                                  
    503  Cache storage error - Permission denied/var/cache/apt-cacher-ng/www.scootersoftware.com/dists/bcompare4/Release [IP: ::1 3142]
    Holen:9 http://security.debian.org jessie/updates/main i386 Packages [444 kB]                            
    Fehl:10 http://archive.zfsonlinux.org/debian jessie Release                                         
      404  Not Found [IP: ::1 3142]
      0% [Warten auf Kopfzeilen]^C    




% curl http://localhost:3142/debian/pool/main/o/openssl/openssl_1.1.0f.orig.tar.gz.asc
<!DOCTYPE html>
<html lang="en"><head><title>403 Forbidden file type or location</title>
...

This is hit by "apt source" in sid. You can test this with Docker, if
Docker is your thing:



TODO:

Better cleanup for orphaned .gpg files

IDEA: create a special control socket, ACLed by local permissions. Requests
coming from there would be considered as ultimately thrusted and go directly to
the maintenance handlers (i.e. alternative reportpage access only for local
administrator even when report page is disabled).

IDEA: a special control command for acng/acngtool to rebind local TCP interfaces.
For https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=786717

IDEA (for nextgen): pre-fallocate the subsequent block of contiguous space in
chunks of less than 1mb size (repeatedly, when the first region was written)

Raw pass-throough of Location: addresses as long as they follow the minimum
safety rules, for web services that apply strange rules WRT validation of such
redirections (https://bugs.launchpad.net/bugs/1625928)

Add a special cleanup page (or just a special mode of Expiration task which
does not abort on errors and does not remove stuff) which focuses on the
distro expiration issue.

Add custom job trigger with a command file plus fifo file (for output). This
might be triggered by SIGUSR2.

Fix URL parser to cope with more combinations of encoded chars (specially in user:pass part)

Make better secure mechanism to trigger maint jobs. The current one requires faked website authentication, etc.
Should use local methods instead, maybe passing a config file with commands via
filesystem which is only readable/writtable to apt-cacher-ng and push it via
signal?

Local storage of admin password shall use hashing, maybe PBKDF2 from OpenSSL

Direct NTLM proxy authentication (user can use cntlm but internal solution would be nice)

Investigate more on Fedora mirror management, improve mirror list generation

No cancel button in attached mode of maint pages

Use cache control headers where possible

[for s.] root startup and EUID changing for privileged port use
[maybe, what was the urgent reason again...?!] Don't die if at leat one socket was open on start. Plus, retry to open sockets on HUP. document this... ifup can send hups?!
[debian] don't install acngfs manpage on hurd... or finally fix and build acngfs for hurd

> And after a code review yesterday I think the html log is still not a
> bad idea. It still needs some cosmetical fixes.
It has advantages.  Would be neat if it could be served by
http://<server ID>:3142/logs.html (or something like that).  It would
have to generate a pick-list of the
/var/log/apt-cacher-ng/maint_*.log.html files ...

 - integrate generic mirror checker from Rakhesh

 - rethink option syntax of acngfs

 - consider creating Debian and Ubuntu security mirror setup, like:
 Remap-ubusec: file:ubuntu_security /ubuntu-security ; http://security.ubuntu.com/ubuntu

 - (maybe) get the additional index files for i18n (Translation*) and d-i files
   and parse them in expiration

 - better control of reconnect attempts limitation (recon. count) (Prio: low,
   external motivation required)

 - support detection and temporary or permanent blacklisting of dead peers,
   configurable with number of retries, maybe using background ping job or sth.
   (Prio: low, external motivation required) 

 - Document all options in the manpage (Prio: low)

 - (maybe) for import: smart mirror structure discovery... if _$ARCH.deb found but no
   binary-$ARCH data for them, try to locate binary-$ARCH folder positions in
   the cache

 - dynamic update/scrolling of the log pages

For 0.9:

 - Add Backports.org profile to the lists? Debian-Ports? Anything else?

 - For import, make it more controlable. Control page should offer checkboxes:
[] Thrust old apt-cacher metadata if found (skip file verification)
[] Forced copy of imported index files (overwrites existing!)
[] Optimistic Precaching Strategy

 - write installation makefile target

